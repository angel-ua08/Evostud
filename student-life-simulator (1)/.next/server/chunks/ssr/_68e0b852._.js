module.exports=[96221,a=>{"use strict";let b=(0,a.i(70106).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},17371,a=>{"use strict";let b=(0,a.i(70106).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],17371)},46864,84335,a=>{"use strict";let b=(0,a.i(70106).default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);a.s(["UserCheck",()=>b],46864);var c=a.i(69240),d=a.i(98437);function e(a){let b=["Олег_Програміст","Марія_Дизайнерка","Максим_Сусід","Софія_Геймерка","Андрій_Студент","Катерина_Активна","Володимир_Лідер","Ірина_Творча"],c=["Студент","Програміст","Дизайнер","Геймер","Активіст"],d=["default","cool","fire","nature","cosmic","golden","neon","sunset"];return Array.from({length:a},(a,e)=>({id:`mock-player-${e}`,player_id:`player-${e}`,nickname:b[e%b.length]+(e>7?`_${e}`:""),level:Math.floor(20*Math.random())+1,status:c[Math.floor(Math.random()*c.length)],skin:d[Math.floor(Math.random()*d.length)],bio:"Привіт! Я граю в EVO STUDENT",is_online:Math.random()>.5,last_online:new Date(Date.now()-7*Math.random()*864e5).toISOString(),total_play_time:Math.floor(1e3*Math.random()),achievements:[],cafe_high_score:Math.floor(100*Math.random()),library_high_score:Math.floor(100*Math.random()),care_packages_high_score:Math.floor(100*Math.random())}))}function f(){return{requests:[],friendships:[]}}function g(a){}async function h(){try{let a=(0,c.createClient)();if(!a)return null;let{data:b,error:d}=await a.auth.getUser();if(d)return console.log("[v0] Auth error (expected if not logged in):",d.message),null;return b?.user||null}catch(a){return console.log("[v0] Failed to get user, continuing without auth"),null}}async function i(a){console.log("[v0] Searching for:",a);let b=(0,c.createClient)();if(b)try{let c=await h(),d=b.from("player_profiles").select("id, player_id, nickname, level, status, skin, bio, faculty, group, is_online, last_online, total_play_time, achievements, cafe_high_score, library_high_score, care_packages_high_score");c&&(d=d.neq("id",c.id)),a&&a.trim().length>0&&(d=d.or(`nickname.ilike.%${a}%,player_id.ilike.%${a}%`));let{data:e,error:f}=await d.order("is_online",{ascending:!1}).order("last_online",{ascending:!1}).limit(20);if(f)console.error("[v0] Supabase search error:",f);else if(e)return console.log("[v0] Found real players from Supabase:",e.length),e}catch(a){console.error("[v0] Supabase search failed:",a)}console.log("[v0] Using mock data for search");let d=e(12);if(a&&a.trim().length>0){let b=d.filter(b=>b.nickname.toLowerCase().includes(a.toLowerCase())||b.player_id&&b.player_id.toLowerCase().includes(a.toLowerCase()));return console.log("[v0] Mock filtered results:",b.length),b}return console.log("[v0] Returning all mock players:",d.length),d}async function j(){let a=(0,c.createClient)();if(a)try{let b=await h(),c=a.from("player_profiles").select("id, player_id, nickname, level, status, skin, bio, faculty, group, is_online, last_online, total_play_time, achievements, cafe_high_score, library_high_score, care_packages_high_score").order("total_play_time",{ascending:!1}).limit(10);if(b){let{data:d}=await a.from("player_profiles").select("level").eq("id",b.id).single();c=d?c.neq("id",b.id).gte("level",Math.max(1,d.level-5)).lte("level",d.level+5):c.neq("id",b.id)}let{data:d,error:e}=await c;if(!e&&d&&d.length>0)return console.log("[v0] Found recommended players from Supabase:",d.length),d}catch(a){console.log("[v0] Supabase recommended failed:",a)}return console.log("[v0] Using mock data for recommendations"),e(6)}async function k(){let a=(0,c.createClient)();if(a)try{let b=await h(),c=a.from("player_profiles").select("id, player_id, nickname, level, status, skin, bio, faculty, group, is_online, last_online, total_play_time, achievements, cafe_high_score, library_high_score, care_packages_high_score").order("last_online",{ascending:!1}).limit(12);b&&(c=c.neq("id",b.id));let{data:d,error:e}=await c;if(!e&&d&&d.length>0)return console.log("[v0] Found active players from Supabase:",d.length),d}catch(a){console.log("[v0] Supabase active players failed:",a)}return console.log("[v0] Using mock data for active players"),e(8)}async function l(a){let b=(0,c.createClient)();if(b)try{let c=await h();if(c){let{data:d}=await b.from("friend_requests").select("*").or(`and(sender_id.eq.${c.id},receiver_id.eq.${a}),and(sender_id.eq.${a},receiver_id.eq.${c.id})`).single();if(d)return{success:!1,error:"Запит вже існує"};let{error:e}=await b.from("friend_requests").insert({sender_id:c.id,receiver_id:a,status:"pending"});if(!e)return{success:!0}}}catch(a){console.log("[v0] Supabase send request failed, using localStorage")}let e=f(),i=await (0,d.loadGameState)(),j=i?.profile?.nickname||"local-user";return e.requests.find(b=>b.sender_id===j&&b.receiver_id===a||b.sender_id===a&&b.receiver_id===j)?{success:!1,error:"Запит вже існує"}:(e.requests.push({id:`req-${Date.now()}`,sender_id:j,receiver_id:a,status:"pending",created_at:new Date().toISOString()}),g(e),{success:!0})}async function m(){let a=(0,c.createClient)();if(a)try{let b=await h();if(b){let{data:c,error:d}=await a.from("friend_requests").select(`
            *,
            sender:player_profiles!friend_requests_sender_id_fkey(id, nickname, level, status, skin, is_online, last_online)
          `).eq("receiver_id",b.id).eq("status","pending").order("created_at",{ascending:!1});if(!d&&c)return c}}catch(a){console.log("[v0] Supabase incoming requests failed, using localStorage")}return[]}async function n(){let a=(0,c.createClient)();if(!a)return[];try{let b=await h();if(!b)return[];let{data:c,error:d}=await a.from("friend_requests").select(`
        *,
        receiver:player_profiles!friend_requests_receiver_id_fkey(id, nickname, level, status, skin, is_online, last_online)
      `).eq("sender_id",b.id).eq("status","pending").order("created_at",{ascending:!1});if(d)throw d;return c||[]}catch(a){return console.error("[v0] Error getting outgoing requests:",a),[]}}async function o(a){let b=(0,c.createClient)();if(b)try{let c=await h();if(c){let{data:d,error:e}=await b.from("friend_requests").select("*").eq("id",a).eq("receiver_id",c.id).single();if(!e&&d){await b.from("friend_requests").update({status:"accepted",updated_at:new Date().toISOString()}).eq("id",a);let[e,f]=[d.sender_id,c.id].sort();return await b.from("friendships").insert({player1_id:e,player2_id:f,friendship_level:1}),{success:!0}}}}catch(a){console.log("[v0] Supabase accept failed, using localStorage")}let d=f(),e=d.requests.find(b=>b.id===a);return e?(e.status="accepted",d.friendships.push({id:`friend-${Date.now()}`,player1_id:e.sender_id,player2_id:e.receiver_id,friendship_level:1,created_at:new Date().toISOString(),last_interaction:new Date().toISOString()}),g(d),{success:!0}):{success:!1,error:"Запит не знайдено"}}async function p(a){let b=(0,c.createClient)();if(!b)return{success:!1,error:"Supabase not configured"};try{let c=await h();if(!c)return{success:!1,error:"Not authenticated"};let{error:d}=await b.from("friend_requests").update({status:"rejected",updated_at:new Date().toISOString()}).eq("id",a).eq("receiver_id",c.id);if(d)throw d;return{success:!0}}catch(a){return console.error("[v0] Error rejecting friend request:",a),{success:!1,error:a.message}}}async function q(){console.log("[v0] Getting friends list...");let a=(0,c.createClient)();if(a)try{let b=await h();if(b){console.log("[v0] Fetching friends for user:",b.id);let{data:c,error:d}=await a.from("friendships").select(`
            *,
            player1:player_profiles!friendships_player1_id_fkey(id, player_id, nickname, level, status, skin, bio, is_online, last_online),
            player2:player_profiles!friendships_player2_id_fkey(id, player_id, nickname, level, status, skin, bio, is_online, last_online)
          `).or(`player1_id.eq.${b.id},player2_id.eq.${b.id}`).order("last_interaction",{ascending:!1});if(d)console.error("[v0] Supabase friends error:",d);else if(c)return console.log("[v0] Found friends from Supabase:",c.length),c.map(a=>({...a,friend:a.player1_id===b.id?a.player2:a.player1}))}else console.log("[v0] No authenticated user")}catch(a){console.error("[v0] Error getting friends from Supabase:",a)}else console.log("[v0] Supabase not configured");console.log("[v0] Using localStorage for friends");let b=f(),g=await (0,d.loadGameState)(),i=g?.profile?.nickname||"local-user",j=b.friendships.filter(a=>a.player1_id===i||a.player2_id===i).map((a,b)=>{let c=e(1);return{...a,friend:c[0]}});return console.log("[v0] Returning mock friends:",j.length),j}async function r(a){let b=(0,c.createClient)();if(!b)return{success:!1,error:"Supabase not configured"};try{if(!await h())return{success:!1,error:"Not authenticated"};let{error:c}=await b.from("friendships").delete().eq("id",a);if(c)throw c;return{success:!0}}catch(a){return console.error("[v0] Error removing friend:",a),{success:!1,error:a.message}}}async function s(a){let b=(0,c.createClient)();if(b)try{let c=await h();if(c){let[d,e]=[c.id,a].sort(),{data:f,error:g}=await b.from("friendships").select("id").eq("player1_id",d).eq("player2_id",e).maybeSingle();if(g)return console.log("[v0] Error checking friendship:",g.message),!1;return!!f}}catch(a){return console.log("[v0] Exception checking friendship:",a),!1}let e=f(),g=await (0,d.loadGameState)(),i=g?.profile?.nickname||"local-user";return e.friendships.some(b=>b.player1_id===i&&b.player2_id===a||b.player1_id===a&&b.player2_id===i)}async function t(a){let b=(0,c.createClient)();if(b)try{let{data:c,error:d}=await b.from("player_profiles").select("id, player_id, nickname, level, status, skin, bio, faculty, group, is_online, last_online, total_play_time, achievements, cafe_high_score, library_high_score, care_packages_high_score").eq("player_id",a).single();if(!d&&c)return c}catch(a){console.log("[v0] Supabase search by ID failed")}let d=e(1);return d.length>0?{...d[0],player_id:a}:null}a.s(["acceptFriendRequest",()=>o,"areFriends",()=>s,"getActivePlayers",()=>k,"getFriends",()=>q,"getIncomingRequests",()=>m,"getOutgoingRequests",()=>n,"getRecommendedPlayers",()=>j,"rejectFriendRequest",()=>p,"removeFriend",()=>r,"searchPlayerByPlayerId",()=>t,"searchPlayers",()=>i,"sendFriendRequest",()=>l],84335)},9215,a=>{"use strict";var b=a.i(87924),c=a.i(46271),d=a.i(46842),e=a.i(24669),f=a.i(70106);let g=(0,f.default)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),h=(0,f.default)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var i=a.i(17371),j=a.i(46864);let k=(0,f.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var l=a.i(40695);function m({player:a,onAddFriend:f,onViewProfile:m,onRemoveFriend:n,friendshipLevel:o,showAddButton:p=!0,isFriend:q=!1,isPending:r=!1}){let s=a.is_online,t=a.last_online?new Date(a.last_online):null,u=new Date,v=Math.floor((t?u.getTime()-t.getTime():0)/6e4),w=Math.floor(v/60),x=Math.floor(w/24),y="Офлайн";s?y="Онлайн":v<5?y="Щойно був":v<60?y=`${v} хв тому`:w<24?y=`${w} год тому`:x<7&&(y=`${x} дн тому`);let z={default:"bg-gradient-to-br from-blue-400 to-blue-600",cool:"bg-gradient-to-br from-cyan-400 to-cyan-600",fire:"bg-gradient-to-br from-orange-400 to-red-600",nature:"bg-gradient-to-br from-green-400 to-green-600",cosmic:"bg-gradient-to-br from-purple-400 to-pink-600",golden:"bg-gradient-to-br from-yellow-400 to-orange-500",shadow:"bg-gradient-to-br from-gray-600 to-gray-900",neon:"bg-gradient-to-br from-lime-400 to-cyan-500",sunset:"bg-gradient-to-br from-pink-500 to-orange-500",ocean:"bg-gradient-to-br from-blue-500 to-teal-500",forest:"bg-gradient-to-br from-emerald-500 to-lime-500",royal:"bg-gradient-to-br from-indigo-500 to-purple-600"};return(0,b.jsx)(c.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-8,scale:1.02},transition:{type:"spring",stiffness:300,damping:20},className:"relative group",children:(0,b.jsxs)("div",{className:"relative bg-gradient-to-br from-white/80 to-white/60 dark:from-slate-800/80 dark:to-slate-900/60 backdrop-blur-xl rounded-3xl p-6 border border-white/30 shadow-xl hover:shadow-2xl transition-all",children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-blue-400/20 via-purple-400/20 to-pink-400/20 opacity-0 group-hover:opacity-100 blur-2xl transition-opacity"}),(0,b.jsxs)("div",{className:"relative z-10 flex items-start gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,b.jsx)(c.motion.div,{whileHover:{scale:1.1,rotate:5},className:`w-16 h-16 rounded-2xl ${z[a.skin]||z.default} p-0.5 shadow-lg`,children:(0,b.jsx)("div",{className:"w-full h-full rounded-[14px] bg-white dark:bg-slate-900 flex items-center justify-center",children:(0,b.jsx)(d.User,{className:"w-8 h-8 text-primary"})})}),(0,b.jsx)("div",{className:"absolute -bottom-1 -right-1",children:s?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full border-2 border-white dark:border-slate-900 shadow-lg"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-green-500 rounded-full animate-ping opacity-75"})]}):(0,b.jsx)("div",{className:"w-5 h-5 bg-gray-400 rounded-full border-2 border-white dark:border-slate-900 shadow-lg"})})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h3",{className:"font-bold text-lg truncate bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:a.nickname}),(0,b.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,b.jsxs)("div",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30",children:[(0,b.jsx)(e.TrendingUp,{className:"w-3 h-3 text-purple-600"}),(0,b.jsxs)("span",{className:"text-xs font-bold text-purple-700 dark:text-purple-300",children:[a.status," • ",a.level," рівень"]})]})}),(0,b.jsx)("div",{className:"flex items-center gap-1.5 mt-2 text-xs text-muted-foreground",children:s?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g,{className:"w-3 h-3 text-green-500"}),(0,b.jsx)("span",{className:"text-green-600 dark:text-green-400 font-medium",children:y})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h,{className:"w-3 h-3 text-gray-400"}),(0,b.jsx)("span",{children:y})]})}),q&&o&&(0,b.jsx)("div",{className:"mt-2",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:(0,b.jsx)("div",{className:"h-full bg-gradient-to-r from-green-400 to-emerald-500 rounded-full transition-all",style:{width:`${o/10*100}%`}})}),(0,b.jsxs)("span",{className:"text-xs font-bold text-green-600",children:["Рівень ",o]})]})})]})]}),(0,b.jsxs)("div",{className:"relative z-10 flex items-center gap-2 mt-4",children:[(0,b.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:m,className:"flex-1 rounded-full bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl border-white/30 hover:bg-white/70 hover:scale-105 transition-all shadow-lg font-bold",children:[(0,b.jsx)(k,{className:"w-4 h-4 mr-1"}),"Профіль"]}),q&&n?(0,b.jsx)(l.Button,{size:"sm",variant:"outline",onClick:n,className:"flex-1 rounded-full bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800 hover:bg-red-100 dark:hover:bg-red-900/30 hover:scale-105 transition-all shadow-lg font-bold text-red-600 dark:text-red-400",children:"Видалити"}):p&&!q?(0,b.jsx)(l.Button,{size:"sm",onClick:f,disabled:r,className:"flex-1 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 hover:scale-105 transition-all shadow-xl font-bold",children:r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.UserCheck,{className:"w-4 h-4 mr-1"}),"Запит надіслано"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.UserPlus,{className:"w-4 h-4 mr-1"}),"Додати"]})}):q?(0,b.jsxs)("div",{className:"flex-1 flex items-center justify-center gap-1.5 px-3 py-2 rounded-full bg-gradient-to-r from-green-500/20 to-emerald-500/20 border border-green-500/30",children:[(0,b.jsx)(j.UserCheck,{className:"w-4 h-4 text-green-600"}),(0,b.jsx)("span",{className:"text-sm font-bold text-green-700 dark:text-green-300",children:"Друг"})]}):null]})]})})}a.s(["PlayerCard",()=>m],9215)}];

//# sourceMappingURL=_68e0b852._.js.map