(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71689,80127,e=>{"use strict";let t=(0,e.i(75254).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["default",()=>t],80127),e.s(["ArrowLeft",()=>t],71689)},96236,18008,80760,74557,47469,e=>{"use strict";var t=e.i(20755);let r={1:"ĞĞ¾Ğ²Ğ°Ñ‡Ğ¾Ğº",5:"Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚",10:"Ğ¡Ñ‚Ğ°Ñ€Ğ°Ğ½Ğ½Ğ¸Ğ¹",15:"Ğ Ğ¾Ğ·ÑƒĞ¼Ğ½Ğ¸Ğº",20:"Ğ“ĞµĞ½Ñ–Ğ¹",25:"Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°",30:"Ğ‘Ğ¾Ğ³ Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚ÑÑ‚Ğ²Ğ°"};function a(e){for(let t of Object.keys(r).map(Number).sort((e,t)=>t-e))if(e>=t)return r[t];return r[1]}e.s(["RARITY_COLORS",0,{common:"from-gray-500 to-gray-600",rare:"from-blue-500 to-cyan-500",epic:"from-purple-500 to-pink-500",legendary:"from-yellow-500 to-orange-500"},"RARITY_GLOW",0,{common:"shadow-gray-500/50",rare:"shadow-blue-500/50",epic:"shadow-purple-500/50",legendary:"shadow-yellow-500/50"},"getStatusForLevel",()=>a],18008);let i="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";function n(){let e=Array.from({length:5},()=>i[Math.floor(Math.random()*i.length)]).join(""),t=Array.from({length:5},()=>i[Math.floor(Math.random()*i.length)]).join("");return`STU-${e}-${t}`}function s(e){return/^STU-[A-Z0-9]{5}-[A-Z0-9]{5}$/.test(e)}async function o(e){try{return await navigator.clipboard.writeText(e),!0}catch(a){let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",document.body.appendChild(t),t.select();let r=document.execCommand("copy");return document.body.removeChild(t),r}}e.s(["copyPlayerId",()=>o,"generatePlayerId",()=>n,"isValidPlayerId",()=>s],80760);let l=[{id:"first_steps",title:"ĞŸĞµÑ€ÑˆÑ– ĞšÑ€Ğ¾ĞºĞ¸",description:"Ğ”Ğ¾ÑÑĞ³Ğ½Ğ¸ 2 Ñ€Ñ–Ğ²Ğ½Ñ",icon:"ğŸ“",category:"progress",rarity:"common",condition:e=>e.stats.level>=2,reward:{xp:50,money:50}},{id:"rising_star",title:"Ğ—Ñ–Ñ€ĞºĞ°, Ñ‰Ğ¾ Ğ¡Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ",description:"Ğ”Ğ¾ÑÑĞ³Ğ½Ğ¸ 5 Ñ€Ñ–Ğ²Ğ½Ñ",icon:"â­",category:"progress",rarity:"common",condition:e=>e.stats.level>=5,reward:{xp:100,money:100}},{id:"expert_student",title:"Ğ•ĞºÑĞ¿ĞµÑ€Ñ‚ Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚",description:"Ğ”Ğ¾ÑÑĞ³Ğ½Ğ¸ 10 Ñ€Ñ–Ğ²Ğ½Ñ",icon:"ğŸ†",category:"progress",rarity:"rare",condition:e=>e.stats.level>=10,reward:{xp:300,money:200}},{id:"master_scholar",title:"ĞœĞ°Ğ¹ÑÑ‚ĞµÑ€ ĞĞ°ÑƒĞºĞ¸",description:"Ğ”Ğ¾ÑÑĞ³Ğ½Ğ¸ 15 Ñ€Ñ–Ğ²Ğ½Ñ",icon:"ğŸ‘‘",category:"progress",rarity:"epic",condition:e=>e.stats.level>=15,reward:{xp:500,money:500}},{id:"legendary_student",title:"Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ğ¸Ğ¹ Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚",description:"Ğ”Ğ¾ÑÑĞ³Ğ½Ğ¸ 20 Ñ€Ñ–Ğ²Ğ½Ñ",icon:"ğŸ’",category:"progress",rarity:"legendary",condition:e=>e.stats.level>=20,reward:{xp:1e3,money:1e3}},{id:"first_hundred",title:"ĞŸĞµÑ€ÑˆĞ° Ğ¡Ğ¾Ñ‚Ğ½Ñ",description:"ĞĞ°ĞºĞ¾Ğ¿Ğ¸Ñ‡ 100 Ğ³Ñ€Ğ½",icon:"ğŸ’°",category:"progress",rarity:"common",condition:e=>e.stats.money+e.stats.bankBalance>=100,reward:{xp:50,money:25}},{id:"entrepreneur",title:"ĞŸÑ–Ğ´Ğ¿Ñ€Ğ¸Ñ”Ğ¼ĞµÑ†ÑŒ",description:"ĞĞ°ĞºĞ¾Ğ¿Ğ¸Ñ‡ 500 Ğ³Ñ€Ğ½",icon:"ğŸ’µ",category:"progress",rarity:"rare",condition:e=>e.stats.money+e.stats.bankBalance>=500,reward:{xp:150,money:100}},{id:"rich_student",title:"Ğ‘Ğ°Ğ³Ğ°Ñ‚Ğ¸Ğ¹ Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚",description:"ĞĞ°ĞºĞ¾Ğ¿Ğ¸Ñ‡ 1000 Ğ³Ñ€Ğ½",icon:"ğŸ’¸",category:"progress",rarity:"epic",condition:e=>e.stats.money+e.stats.bankBalance>=1e3,reward:{xp:300,money:250}},{id:"coffee_novice",title:"Ğ‘Ğ°Ñ€Ñ–ÑÑ‚Ğ° ĞĞ¾Ğ²Ğ°Ñ‡Ğ¾Ğº",description:"ĞĞ°Ğ±ĞµÑ€Ğ¸ 10+ Ğ±Ğ°Ğ»Ñ–Ğ² Ğ² ĞšĞ°Ñ„Ğµ",icon:"â˜•",category:"minigames",rarity:"common",condition:e=>e.minigameHighScores?.cafe>=10,reward:{xp:50,money:30}},{id:"coffee_master",title:"ĞœĞ°Ğ¹ÑÑ‚ĞµÑ€ Ğ‘Ğ°Ñ€Ñ–ÑÑ‚Ğ°",description:"ĞĞ°Ğ±ĞµÑ€Ğ¸ 20+ Ğ±Ğ°Ğ»Ñ–Ğ² Ğ² ĞšĞ°Ñ„Ğµ",icon:"â˜•",category:"minigames",rarity:"rare",condition:e=>e.minigameHighScores?.cafe>=20,reward:{xp:150,money:100}},{id:"library_explorer",title:"Ğ”Ğ¾ÑĞ»Ñ–Ğ´Ğ½Ğ¸Ğº Ğ‘Ñ–Ğ±Ğ»Ñ–Ğ¾Ñ‚ĞµĞºĞ¸",description:"Ğ—Ñ–Ğ±ĞµÑ€Ğ¸ Ğ²ÑÑ– 8 ĞºĞ½Ğ¸Ğ³ Ğ² Ğ‘Ñ–Ğ±Ğ»Ñ–Ğ¾Ñ‚ĞµÑ†Ñ–",icon:"ğŸ“š",category:"minigames",rarity:"common",condition:e=>e.minigameHighScores?.library>=8,reward:{xp:100,money:50}},{id:"package_collector",title:"Ğ—Ğ±Ğ¸Ñ€Ğ°Ñ‡ ĞŸĞ¾ÑĞ¸Ğ»Ğ¾Ğº",description:"Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ğ¹ 5+ Ğ¿Ğ°ĞºÑƒĞ½ĞºÑ–Ğ² Ğ·Ğ° Ñ€Ğ°Ğ·",icon:"ğŸ“¦",category:"minigames",rarity:"common",condition:e=>e.minigameHighScores?.carePackages>=5,reward:{xp:75,money:40}},{id:"first_friend",title:"ĞŸĞµÑ€ÑˆĞ¸Ğ¹ Ğ”Ñ€ÑƒĞ³",description:"Ğ”Ğ¾Ğ´Ğ°Ğ¹ Ğ¿ĞµÑ€ÑˆĞ¾Ğ³Ğ¾ Ğ´Ñ€ÑƒĞ³Ğ°",icon:"ğŸ‘¥",category:"social",rarity:"common",condition:e=>e.friends&&e.friends.length>=1,reward:{xp:50,money:25}},{id:"social_butterfly",title:"Ğ¡Ğ¾Ñ†Ñ–Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ ĞœĞµÑ‚ĞµĞ»Ğ¸Ğº",description:"Ğ”Ğ¾Ğ´Ğ°Ğ¹ 5 Ğ´Ñ€ÑƒĞ·Ñ–Ğ²",icon:"ğŸ¦‹",category:"social",rarity:"rare",condition:e=>e.friends&&e.friends.length>=5,reward:{xp:150,money:100}},{id:"popular_student",title:"ĞŸĞ¾Ğ¿ÑƒĞ»ÑÑ€Ğ½Ğ¸Ğ¹ Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚",description:"Ğ”Ğ¾Ğ´Ğ°Ğ¹ 10 Ğ´Ñ€ÑƒĞ·Ñ–Ğ²",icon:"ğŸŒŸ",category:"social",rarity:"epic",condition:e=>e.friends&&e.friends.length>=10,reward:{xp:300,money:200}},{id:"skilled_beginner",title:"ĞĞ°Ğ²Ñ‡ĞµĞ½Ğ¸Ğ¹ ĞŸĞ¾Ñ‡Ğ°Ñ‚ĞºÑ–Ğ²ĞµÑ†ÑŒ",description:"ĞŸÑ–Ğ´Ğ²Ğ¸Ñ‰ Ğ±ÑƒĞ´ÑŒ-ÑĞºÑƒ Ğ½Ğ°Ğ²Ğ¸Ñ‡ĞºÑƒ Ğ´Ğ¾ Ñ€Ñ–Ğ²Ğ½Ñ 3",icon:"ğŸ“ˆ",category:"skills",rarity:"common",condition:e=>!!e.skills&&Object.values(e.skills).some(e=>e>=3),reward:{xp:75,money:50}},{id:"jack_of_trades",title:"ĞœĞ°Ğ¹ÑÑ‚ĞµÑ€ Ğ½Ğ° Ğ’ÑÑ– Ğ ÑƒĞºĞ¸",description:"ĞŸÑ–Ğ´Ğ²Ğ¸Ñ‰ 3 Ñ€Ñ–Ğ·Ğ½Ñ– Ğ½Ğ°Ğ²Ğ¸Ñ‡ĞºĞ¸ Ğ´Ğ¾ Ñ€Ñ–Ğ²Ğ½Ñ 5",icon:"ğŸ¯",category:"skills",rarity:"rare",condition:e=>!!e.skills&&Object.values(e.skills).filter(e=>e>=5).length>=3,reward:{xp:200,money:150}},{id:"event_participant",title:"Ğ£Ñ‡Ğ°ÑĞ½Ğ¸Ğº ĞŸĞ¾Ğ´Ñ–Ğ¹",description:"Ğ’Ñ–Ğ·ÑŒĞ¼Ğ¸ ÑƒÑ‡Ğ°ÑÑ‚ÑŒ Ñƒ 1 Ğ¿Ğ¾Ğ´Ñ–Ñ—",icon:"ğŸª",category:"events",rarity:"common",condition:e=>e.completedEvents&&e.completedEvents.length>=1,reward:{xp:50,money:30}},{id:"event_enthusiast",title:"Ğ•Ğ½Ñ‚ÑƒĞ·Ñ–Ğ°ÑÑ‚ ĞŸĞ¾Ğ´Ñ–Ğ¹",description:"Ğ’Ñ–Ğ·ÑŒĞ¼Ğ¸ ÑƒÑ‡Ğ°ÑÑ‚ÑŒ Ñƒ 5 Ğ¿Ğ¾Ğ´Ñ–ÑÑ…",icon:"ğŸ‰",category:"events",rarity:"rare",condition:e=>e.completedEvents&&e.completedEvents.length>=5,reward:{xp:200,money:150}},{id:"explorer",title:"Ğ”Ğ¾ÑĞ»Ñ–Ğ´Ğ½Ğ¸Ğº",description:"Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ğ¹ 5 Ğ»Ğ¾ĞºĞ°Ñ†Ñ–Ğ¹ Ğ² 3D Ğ³Ñ€Ñ–",icon:"ğŸ—ºï¸",category:"special",rarity:"rare",condition:e=>e.polytechnic3DProgress&&e.polytechnic3DProgress.visitedRooms.length>=5,reward:{xp:150,money:100}},{id:"shadow_challenger",title:"Ğ’Ğ¸ĞºĞ»Ğ¸Ğº Ğ¢Ñ–Ğ½Ñ–",description:"ĞŸĞµÑ€ĞµĞ¼Ğ¾Ğ¶ Ğ¢Ñ–Ğ½ÑŒĞ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚Ğ° 3 Ñ€Ğ°Ğ·Ğ¸",icon:"ğŸŒ‘",category:"special",rarity:"epic",condition:e=>e.shadowStudent&&e.shadowStudent.challengesWon>=3,reward:{xp:300,money:250}},{id:"personality_discovered",title:"ĞÑĞ¾Ğ±Ğ¸ÑÑ‚Ñ–ÑÑ‚ÑŒ Ğ Ğ¾Ğ·ĞºÑ€Ğ¸Ñ‚Ğ°",description:"ĞŸÑ€Ğ¾Ğ¹Ğ´Ğ¸ Ñ‚ĞµÑÑ‚ Ğ¾ÑĞ¾Ğ±Ğ¸ÑÑ‚Ğ¾ÑÑ‚Ñ–",icon:"ğŸ§ ",category:"special",rarity:"common",condition:e=>e.personalityType&&"default"!==e.personalityType,reward:{xp:100,money:50}},{id:"inventory_collector",title:"ĞšĞ¾Ğ»ĞµĞºÑ†Ñ–Ğ¾Ğ½ĞµÑ€",description:"Ğ—Ñ–Ğ±ĞµÑ€Ğ¸ 10 Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ñ–Ğ² Ğ² Ñ–Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ–",icon:"ğŸ’",category:"special",rarity:"rare",condition:e=>e.inventory&&e.inventory.length>=10,reward:{xp:150,money:100}},{id:"perfect_balance",title:"Ğ†Ğ´ĞµĞ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ",description:"Ğ”Ğ¾ÑÑĞ³Ğ½Ğ¸ 80+ Ñ‰Ğ°ÑÑ‚Ñ Ñ‚Ğ° ĞµĞ½ĞµÑ€Ğ³Ñ–Ñ— Ğ¾Ğ´Ğ½Ğ¾Ñ‡Ğ°ÑĞ½Ğ¾",icon:"âš–ï¸",category:"special",rarity:"epic",condition:e=>e.stats.happiness>=80&&e.stats.energy>=80,reward:{xp:250,money:200}},{id:"stress_free",title:"Ğ‘ĞµĞ· Ğ¡Ñ‚Ñ€ĞµÑÑƒ",description:"Ğ—Ğ½Ğ¸Ğ·ÑŒ ÑÑ‚Ñ€ĞµÑ Ğ´Ğ¾ 10 Ğ°Ğ±Ğ¾ Ğ¼ĞµĞ½ÑˆĞµ",icon:"ğŸ˜Œ",category:"special",rarity:"rare",condition:e=>e.stats.stress<=10,reward:{xp:150,money:100}}];function c(e){return({progress:"from-blue-500/20 to-blue-600/20",minigames:"from-purple-500/20 to-purple-600/20",social:"from-pink-500/20 to-pink-600/20",skills:"from-green-500/20 to-green-600/20",events:"from-orange-500/20 to-orange-600/20",special:"from-yellow-500/20 to-yellow-600/20"})[e]}function d(e){return({common:"text-gray-400",rare:"text-blue-400",epic:"text-purple-400",legendary:"text-yellow-400"})[e]}function u(e){return({progress:"ĞŸÑ€Ğ¾Ğ³Ñ€ĞµÑ",minigames:"ĞœÑ–Ğ½Ñ–-Ñ–Ğ³Ñ€Ğ¸",social:"Ğ¡Ğ¾Ñ†Ñ–Ğ°Ğ»ÑŒĞ½Ğµ",skills:"ĞĞ°Ğ²Ğ¸Ñ‡ĞºĞ¸",events:"ĞŸĞ¾Ğ´Ñ–Ñ—",special:"Ğ¡Ğ¿ĞµÑ†Ñ–Ğ°Ğ»ÑŒĞ½Ñ–"})[e]}function m(e){let t=e.achievements||[],r=[],a=0,i=0;for(let n of l)!t.includes(n.id)&&n.condition(e)&&(r.push(n),a+=n.reward.xp,i+=n.reward.money);if(0===r.length)return{newAchievements:[],updatedState:e};let n={...e,achievements:[...t,...r.map(e=>e.id)],stats:{...e.stats,experience:e.stats.experience+a,money:e.stats.money+i}};return{newAchievements:r,updatedState:n}}function p(e){let t=e.achievements||[],r=[],a=[];for(let e of l)t.includes(e.id)?r.push(e):a.push(e);return{unlocked:r,locked:a,total:l.length,unlockedCount:r.length,percentage:Math.round(r.length/l.length*100)}}e.s(["ACHIEVEMENTS",0,l,"getCategoryColor",()=>c,"getCategoryName",()=>u,"getRarityColor",()=>d],74557),e.s(["checkAchievements",()=>m,"getAchievementProgress",()=>p],47469);let f={playerId:void 0,playerName:"",stats:{stress:30,happiness:70,energy:80,money:100,bankBalance:0,level:1,experience:0,experienceToNext:100},completedEvents:[],achievements:[],inventory:[],lastPlayed:Date.now(),totalPlayTime:0,minigameHighScores:{cafe:0,library:0,carePackages:0},settings:{soundEnabled:!0,musicEnabled:!0,language:"ua",graphicsQuality:"high"},skin:"default",status:"ĞĞ¾Ğ²Ğ°Ñ‡Ğ¾Ğº",bio:"",faculty:"",group:"",social:"",unclaimedRewards:[],activeBoosters:[],personalityType:"default",eventCompletions:{},claimedEventRewards:[],polytechnic3DProgress:{completedQuests:[],collectedItems:[],visitedRooms:[]},skills:{charisma:0,communication:0,resilience:0,creativity:0,agility:0,success:0},friends:[],innerVoiceHistory:[],shadowStudent:{initialized:!1,challengesWon:0,challengesLost:0,lastEncounter:0}};async function h(){{let e=localStorage.getItem("evo-student-state");if(e)return JSON.parse(e)}return null}async function g(e){let{newAchievements:r,updatedState:a}=m(e),i=r.length>0?a:e;localStorage.setItem("evo-student-state",JSON.stringify(i));let n=(0,t.createClient)();if(n)try{let{data:{user:e},error:t}=await n.auth.getUser().catch(()=>({data:{user:null},error:Error("Auth unavailable")}));if(t||!e)return;let{error:r}=await n.from("player_profiles").update({nickname:i.playerName,stress:Math.round(100*i.stats.stress)/100,happiness:Math.round(100*i.stats.happiness)/100,energy:Math.round(100*i.stats.energy)/100,coins:Math.floor(i.stats.money),bank_balance:Math.floor(i.stats.bankBalance),level:Math.floor(i.stats.level),experience:Math.floor(i.stats.experience),completed_events:i.completedEvents,achievements:i.achievements,inventory:i.inventory,total_play_time:Math.floor(i.totalPlayTime),cafe_high_score:Math.floor(i.minigameHighScores.cafe),library_high_score:Math.floor(i.minigameHighScores.library),care_packages_high_score:Math.floor(i.minigameHighScores.carePackages),sound_enabled:i.settings?.soundEnabled??!0,music_enabled:i.settings?.musicEnabled??!0,language:i.settings?.language??"ua",graphics_quality:i.settings?.graphicsQuality??"high",skin:i.skin??"default",status:i.status,bio:i.bio,faculty:i.faculty,group:i.group,social:i.social,unclaimed_rewards:i.unclaimedRewards,active_boosters:i.activeBoosters,personality_type:i.personalityType??"default",event_completions:i.eventCompletions,claimed_event_rewards:i.claimedEventRewards,polytechnic3d_completed_quests:i.polytechnic3DProgress?.completedQuests,polytechnic3d_collected_items:i.polytechnic3DProgress?.collectedItems,polytechnic3d_visited_rooms:i.polytechnic3DProgress?.visitedRooms,skills:i.skills,friends:i.friends,inner_voice_history:i.innerVoiceHistory,shadow_student_initialized:i.shadowStudent?.initialized??!1,shadow_student_challenges_won:i.shadowStudent?.challengesWon??0,shadow_student_challenges_lost:i.shadowStudent?.challengesLost??0,shadow_student_last_encounter:i.shadowStudent?.lastEncounter??0,shadow_student_current_challenge_id:i.shadowStudent?.currentChallengeId}).eq("id",e.id)}catch(e){}}async function y(e,r="default"){let a=n(),i={...f,playerId:a,playerName:e,skin:r,lastPlayed:Date.now(),shadowStudent:{initialized:!1,challengesWon:0,challengesLost:0,lastEncounter:0}};localStorage.setItem("evo-student-state",JSON.stringify(i));let s=(0,t.createClient)();if(!s)return i;try{let{data:{user:t}}=await s.auth.getUser().catch(()=>({data:{user:null}}));t&&await s.from("player_profiles").update({nickname:e,skin:r,status:i.status,unclaimed_rewards:i.unclaimedRewards,active_boosters:i.activeBoosters,personality_type:i.personalityType,event_completions:i.eventCompletions,claimed_event_rewards:i.claimedEventRewards,polytechnic3d_completed_quests:i.polytechnic3DProgress?.completedQuests,polytechnic3d_collected_items:i.polytechnic3DProgress?.collectedItems,polytechnic3d_visited_rooms:i.polytechnic3DProgress?.visitedRooms,skills:i.skills,friends:i.friends,inner_voice_history:i.innerVoiceHistory,shadow_student_initialized:i.shadowStudent?.initialized??!1,shadow_student_challenges_won:i.shadowStudent?.challengesWon??0,shadow_student_challenges_lost:i.shadowStudent?.challengesLost??0,shadow_student_last_encounter:i.shadowStudent?.lastEncounter??0,shadow_student_current_challenge_id:i.shadowStudent?.currentChallengeId,bio:i.bio,faculty:i.faculty,group:i.group,social:i.social}).eq("id",t.id)}catch(e){}return i}function v(e,t){let r={...e.stats};Object.keys(t).forEach(e=>{"number"==typeof t[e]&&(r[e]=t[e])}),r.stress=Math.max(0,Math.min(100,r.stress)),r.happiness=Math.max(0,Math.min(100,r.happiness)),r.energy=Math.max(0,Math.min(100,r.energy)),r.money=Math.max(0,r.money),r.bankBalance=Math.max(0,r.bankBalance);let{experience:i,experienceToNext:n,level:s}=r,o=[...e.unclaimedRewards||[]];for(;i>=n;)i-=n,n=Math.floor(100*Math.pow(1.5,++s-1)),o.push(s);r.experience=i,r.level=s,r.experienceToNext=n;let l=a(s);return{...e,stats:r,status:l,unclaimedRewards:o}}function x(e,t){return v(e,{experience:e.stats.experience+t})}function _(e,t){return v(e,{money:e.stats.money+t})}e.s(["addExperience",()=>x,"addMoney",()=>_,"createNewGame",()=>y,"loadGameState",()=>h,"saveGameState",()=>g,"updateStats",()=>v],96236)},83086,e=>{"use strict";let t=(0,e.i(75254).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);e.s(["Sparkles",()=>t],83086)},27341,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(81140),i=e.i(30030),n=e.i(20783),s=e.i(91918),o=e.i(10772),l=e.i(48425),c=e.i(30207),d=e.i(69340),u=r.createContext(void 0);function m(e){let t=r.useContext(u);return e||t||"ltr"}var p="rovingFocusGroup.onEntryFocus",f={bubbles:!1,cancelable:!0},h="RovingFocusGroup",[g,y,v]=function(e){let a=e+"CollectionProvider",[o,l]=(0,i.createContextScope)(a),[c,d]=o(a,{collectionRef:{current:null},itemMap:new Map}),u=e=>{let{scope:a,children:i}=e,n=r.default.useRef(null),s=r.default.useRef(new Map).current;return(0,t.jsx)(c,{scope:a,itemMap:s,collectionRef:n,children:i})};u.displayName=a;let m=e+"CollectionSlot",p=r.default.forwardRef((e,r)=>{let{scope:a,children:i}=e,o=d(m,a),l=(0,n.useComposedRefs)(r,o.collectionRef);return(0,t.jsx)(s.Slot,{ref:l,children:i})});p.displayName=m;let f=e+"CollectionItemSlot",h="data-radix-collection-item",g=r.default.forwardRef((e,a)=>{let{scope:i,children:o,...l}=e,c=r.default.useRef(null),u=(0,n.useComposedRefs)(a,c),m=d(f,i);return r.default.useEffect(()=>(m.itemMap.set(c,{ref:c,...l}),()=>void m.itemMap.delete(c))),(0,t.jsx)(s.Slot,{...{[h]:""},ref:u,children:o})});return g.displayName=f,[{Provider:u,Slot:p,ItemSlot:g},function(t){let a=d(e+"CollectionConsumer",t);return r.default.useCallback(()=>{let e=a.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(a.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[a.collectionRef,a.itemMap])},l]}(h),[x,_]=(0,i.createContextScope)(h,[v]),[w,b]=x(h),k=r.forwardRef((e,r)=>(0,t.jsx)(g.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(g.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,t.jsx)(S,{...e,ref:r})})}));k.displayName=h;var S=r.forwardRef((e,i)=>{let{__scopeRovingFocusGroup:s,orientation:o,loop:u=!1,dir:h,currentTabStopId:g,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:x,onEntryFocus:_,preventScrollOnEntryFocus:b=!1,...k}=e,S=r.useRef(null),j=(0,n.useComposedRefs)(i,S),N=m(h),[C=null,R]=(0,d.useControllableState)({prop:g,defaultProp:v,onChange:x}),[q,E]=r.useState(!1),I=(0,c.useCallbackRef)(_),T=y(s),P=r.useRef(!1),[A,D]=r.useState(0);return r.useEffect(()=>{let e=S.current;if(e)return e.addEventListener(p,I),()=>e.removeEventListener(p,I)},[I]),(0,t.jsx)(w,{scope:s,orientation:o,dir:N,loop:u,currentTabStopId:C,onItemFocus:r.useCallback(e=>R(e),[R]),onItemShiftTab:r.useCallback(()=>E(!0),[]),onFocusableItemAdd:r.useCallback(()=>D(e=>e+1),[]),onFocusableItemRemove:r.useCallback(()=>D(e=>e-1),[]),children:(0,t.jsx)(l.Primitive.div,{tabIndex:q||0===A?-1:0,"data-orientation":o,...k,ref:j,style:{outline:"none",...e.style},onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,()=>{P.current=!0}),onFocus:(0,a.composeEventHandlers)(e.onFocus,e=>{let t=!P.current;if(e.target===e.currentTarget&&t&&!q){let t=new CustomEvent(p,f);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=T().filter(e=>e.focusable);M([e.find(e=>e.active),e.find(e=>e.id===C),...e].filter(Boolean).map(e=>e.ref.current),b)}}P.current=!1}),onBlur:(0,a.composeEventHandlers)(e.onBlur,()=>E(!1))})})}),j="RovingFocusGroupItem",N=r.forwardRef((e,i)=>{let{__scopeRovingFocusGroup:n,focusable:s=!0,active:c=!1,tabStopId:d,...u}=e,m=(0,o.useId)(),p=d||m,f=b(j,n),h=f.currentTabStopId===p,v=y(n),{onFocusableItemAdd:x,onFocusableItemRemove:_}=f;return r.useEffect(()=>{if(s)return x(),()=>_()},[s,x,_]),(0,t.jsx)(g.ItemSlot,{scope:n,id:p,focusable:s,active:c,children:(0,t.jsx)(l.Primitive.span,{tabIndex:h?0:-1,"data-orientation":f.orientation,...u,ref:i,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{s?f.onItemFocus(p):e.preventDefault()}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>f.onItemFocus(p)),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void f.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var a;let i=(a=e.key,"rtl"!==r?a:"ArrowLeft"===a?"ArrowRight":"ArrowRight"===a?"ArrowLeft":a);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(i))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(i)))return C[i]}(e,f.orientation,f.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let i=v().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)i.reverse();else if("prev"===t||"next"===t){var r,a;"prev"===t&&i.reverse();let n=i.indexOf(e.currentTarget);i=f.loop?(r=i,a=n+1,r.map((e,t)=>r[(a+t)%r.length])):i.slice(n+1)}setTimeout(()=>M(i))}})})})});N.displayName=j;var C={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function M(e,t=!1){let r=document.activeElement;for(let a of e)if(a===r||(a.focus({preventScroll:t}),document.activeElement!==r))return}var R=e.i(96626),q="Tabs",[E,I]=(0,i.createContextScope)(q,[_]),T=_(),[P,A]=E(q),D=r.forwardRef((e,r)=>{let{__scopeTabs:a,value:i,onValueChange:n,defaultValue:s,orientation:c="horizontal",dir:u,activationMode:p="automatic",...f}=e,h=m(u),[g,y]=(0,d.useControllableState)({prop:i,onChange:n,defaultProp:s});return(0,t.jsx)(P,{scope:a,baseId:(0,o.useId)(),value:g,onValueChange:y,orientation:c,dir:h,activationMode:p,children:(0,t.jsx)(l.Primitive.div,{dir:h,"data-orientation":c,...f,ref:r})})});D.displayName=q;var F="TabsList",L=r.forwardRef((e,r)=>{let{__scopeTabs:a,loop:i=!0,...n}=e,s=A(F,a),o=T(a);return(0,t.jsx)(k,{asChild:!0,...o,orientation:s.orientation,dir:s.dir,loop:i,children:(0,t.jsx)(l.Primitive.div,{role:"tablist","aria-orientation":s.orientation,...n,ref:r})})});L.displayName=F;var H="TabsTrigger",O=r.forwardRef((e,r)=>{let{__scopeTabs:i,value:n,disabled:s=!1,...o}=e,c=A(H,i),d=T(i),u=z(c.baseId,n),m=B(c.baseId,n),p=n===c.value;return(0,t.jsx)(N,{asChild:!0,...d,focusable:!s,active:p,children:(0,t.jsx)(l.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":m,"data-state":p?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...o,ref:r,onMouseDown:(0,a.composeEventHandlers)(e.onMouseDown,e=>{s||0!==e.button||!1!==e.ctrlKey?e.preventDefault():c.onValueChange(n)}),onKeyDown:(0,a.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&c.onValueChange(n)}),onFocus:(0,a.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==c.activationMode;p||s||!e||c.onValueChange(n)})})})});O.displayName=H;var U="TabsContent",$=r.forwardRef((e,a)=>{let{__scopeTabs:i,value:n,forceMount:s,children:o,...c}=e,d=A(U,i),u=z(d.baseId,n),m=B(d.baseId,n),p=n===d.value,f=r.useRef(p);return r.useEffect(()=>{let e=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,t.jsx)(R.Presence,{present:s||p,children:({present:r})=>(0,t.jsx)(l.Primitive.div,{"data-state":p?"active":"inactive","data-orientation":d.orientation,role:"tabpanel","aria-labelledby":u,hidden:!r,id:m,tabIndex:0,...c,ref:a,style:{...e.style,animationDuration:f.current?"0s":void 0},children:r&&o})})});function z(e,t){return`${e}-trigger-${t}`}function B(e,t){return`${e}-content-${t}`}$.displayName=U;var G=e.i(47163);function K({className:e,...r}){return(0,t.jsx)(D,{"data-slot":"tabs",className:(0,G.cn)("flex flex-col gap-2",e),...r})}function V({className:e,...r}){return(0,t.jsx)(L,{"data-slot":"tabs-list",className:(0,G.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",e),...r})}function W({className:e,...r}){return(0,t.jsx)(O,{"data-slot":"tabs-trigger",className:(0,G.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function J({className:e,...r}){return(0,t.jsx)($,{"data-slot":"tabs-content",className:(0,G.cn)("flex-1 outline-none",e),...r})}e.s(["Tabs",()=>K,"TabsContent",()=>J,"TabsList",()=>V,"TabsTrigger",()=>W],27341)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},79002,e=>{"use strict";let t=(0,e.i(75254).default)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["UserPlus",()=>t],79002)},82293,7850,e=>{"use strict";let t=(0,e.i(75254).default)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);e.s(["UserCheck",()=>t],82293);var r=e.i(20755),a=e.i(96236);function i(e){let t=["ĞĞ»ĞµĞ³_ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ñ–ÑÑ‚","ĞœĞ°Ñ€Ñ–Ñ_Ğ”Ğ¸Ğ·Ğ°Ğ¹Ğ½ĞµÑ€ĞºĞ°","ĞœĞ°ĞºÑĞ¸Ğ¼_Ğ¡ÑƒÑÑ–Ğ´","Ğ¡Ğ¾Ñ„Ñ–Ñ_Ğ“ĞµĞ¹Ğ¼ĞµÑ€ĞºĞ°","ĞĞ½Ğ´Ñ€Ñ–Ğ¹_Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚","ĞšĞ°Ñ‚ĞµÑ€Ğ¸Ğ½Ğ°_ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ°","Ğ’Ğ¾Ğ»Ğ¾Ğ´Ğ¸Ğ¼Ğ¸Ñ€_Ğ›Ñ–Ğ´ĞµÑ€","Ğ†Ñ€Ğ¸Ğ½Ğ°_Ğ¢Ğ²Ğ¾Ñ€Ñ‡Ğ°"],r=["Ğ¡Ñ‚ÑƒĞ´ĞµĞ½Ñ‚","ĞŸÑ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ñ–ÑÑ‚","Ğ”Ğ¸Ğ·Ğ°Ğ¹Ğ½ĞµÑ€","Ğ“ĞµĞ¹Ğ¼ĞµÑ€","ĞĞºÑ‚Ğ¸Ğ²Ñ–ÑÑ‚"],a=["default","cool","fire","nature","cosmic","golden","neon","sunset"];return Array.from({length:e},(e,i)=>({id:`mock-player-${i}`,player_id:`player-${i}`,nickname:t[i%t.length]+(i>7?`_${i}`:""),level:Math.floor(20*Math.random())+1,status:r[Math.floor(Math.random()*r.length)],skin:a[Math.floor(Math.random()*a.length)],bio:"ĞŸÑ€Ğ¸Ğ²Ñ–Ñ‚! Ğ¯ Ğ³Ñ€Ğ°Ñ Ğ² EVO STUDENT",is_online:Math.random()>.5,last_online:new Date(Date.now()-7*Math.random()*864e5).toISOString(),total_play_time:Math.floor(1e3*Math.random()),achievements:[],cafe_high_score:Math.floor(100*Math.random()),library_high_score:Math.floor(100*Math.random()),care_packages_high_score:Math.floor(100*Math.random())}))}function n(){let e=localStorage.getItem("evo_student_friends");if(!e)return{requests:[],friendships:[]};try{return JSON.parse(e)}catch{return{requests:[],friendships:[]}}}function s(e){localStorage.setItem("evo_student_friends",JSON.stringify(e))}async function o(){try{let e=(0,r.createClient)();if(!e)return null;let{data:t,error:a}=await e.auth.getUser();if(a)return console.log("[v0] Auth error (expected if not logged in):",a.message),null;return t?.user||null}catch(e){return console.log("[v0] Failed to get user, continuing without auth"),null}}async function l(e){console.log("[v0] Searching for:",e);let t=(0,r.createClient)();if(t)try{let r=await o(),a=t.from("player_profiles").select("id, player_id, nickname, level, status, skin, bio, faculty, group, is_online, last_online, total_play_time, achievements, cafe_high_score, library_high_score, care_packages_high_score");r&&(a=a.neq("id",r.id)),e&&e.trim().length>0&&(a=a.or(`nickname.ilike.%${e}%,player_id.ilike.%${e}%`));let{data:i,error:n}=await a.order("is_online",{ascending:!1}).order("last_online",{ascending:!1}).limit(20);if(n)console.error("[v0] Supabase search error:",n);else if(i)return console.log("[v0] Found real players from Supabase:",i.length),i}catch(e){console.error("[v0] Supabase search failed:",e)}console.log("[v0] Using mock data for search");let a=i(12);if(e&&e.trim().length>0){let t=a.filter(t=>t.nickname.toLowerCase().includes(e.toLowerCase())||t.player_id&&t.player_id.toLowerCase().includes(e.toLowerCase()));return console.log("[v0] Mock filtered results:",t.length),t}return console.log("[v0] Returning all mock players:",a.length),a}async function c(){let e=(0,r.createClient)();if(e)try{let t=await o(),r=e.from("player_profiles").select("id, player_id, nickname, level, status, skin, bio, faculty, group, is_online, last_online, total_play_time, achievements, cafe_high_score, library_high_score, care_packages_high_score").order("total_play_time",{ascending:!1}).limit(10);if(t){let{data:a}=await e.from("player_profiles").select("level").eq("id",t.id).single();r=a?r.neq("id",t.id).gte("level",Math.max(1,a.level-5)).lte("level",a.level+5):r.neq("id",t.id)}let{data:a,error:i}=await r;if(!i&&a&&a.length>0)return console.log("[v0] Found recommended players from Supabase:",a.length),a}catch(e){console.log("[v0] Supabase recommended failed:",e)}return console.log("[v0] Using mock data for recommendations"),i(6)}async function d(){let e=(0,r.createClient)();if(e)try{let t=await o(),r=e.from("player_profiles").select("id, player_id, nickname, level, status, skin, bio, faculty, group, is_online, last_online, total_play_time, achievements, cafe_high_score, library_high_score, care_packages_high_score").order("last_online",{ascending:!1}).limit(12);t&&(r=r.neq("id",t.id));let{data:a,error:i}=await r;if(!i&&a&&a.length>0)return console.log("[v0] Found active players from Supabase:",a.length),a}catch(e){console.log("[v0] Supabase active players failed:",e)}return console.log("[v0] Using mock data for active players"),i(8)}async function u(e){let t=(0,r.createClient)();if(t)try{let r=await o();if(r){let{data:a}=await t.from("friend_requests").select("*").or(`and(sender_id.eq.${r.id},receiver_id.eq.${e}),and(sender_id.eq.${e},receiver_id.eq.${r.id})`).single();if(a)return{success:!1,error:"Ğ—Ğ°Ğ¿Ğ¸Ñ‚ Ğ²Ğ¶Ğµ Ñ–ÑĞ½ÑƒÑ”"};let{error:i}=await t.from("friend_requests").insert({sender_id:r.id,receiver_id:e,status:"pending"});if(!i)return{success:!0}}}catch(e){console.log("[v0] Supabase send request failed, using localStorage")}let i=n(),l=await (0,a.loadGameState)(),c=l?.profile?.nickname||"local-user";return i.requests.find(t=>t.sender_id===c&&t.receiver_id===e||t.sender_id===e&&t.receiver_id===c)?{success:!1,error:"Ğ—Ğ°Ğ¿Ğ¸Ñ‚ Ğ²Ğ¶Ğµ Ñ–ÑĞ½ÑƒÑ”"}:(i.requests.push({id:`req-${Date.now()}`,sender_id:c,receiver_id:e,status:"pending",created_at:new Date().toISOString()}),s(i),{success:!0})}async function m(){let e=(0,r.createClient)();if(e)try{let t=await o();if(t){let{data:r,error:a}=await e.from("friend_requests").select(`
            *,
            sender:player_profiles!friend_requests_sender_id_fkey(id, nickname, level, status, skin, is_online, last_online)
          `).eq("receiver_id",t.id).eq("status","pending").order("created_at",{ascending:!1});if(!a&&r)return r}}catch(e){console.log("[v0] Supabase incoming requests failed, using localStorage")}return[]}async function p(){let e=(0,r.createClient)();if(!e)return[];try{let t=await o();if(!t)return[];let{data:r,error:a}=await e.from("friend_requests").select(`
        *,
        receiver:player_profiles!friend_requests_receiver_id_fkey(id, nickname, level, status, skin, is_online, last_online)
      `).eq("sender_id",t.id).eq("status","pending").order("created_at",{ascending:!1});if(a)throw a;return r||[]}catch(e){return console.error("[v0] Error getting outgoing requests:",e),[]}}async function f(e){let t=(0,r.createClient)();if(t)try{let r=await o();if(r){let{data:a,error:i}=await t.from("friend_requests").select("*").eq("id",e).eq("receiver_id",r.id).single();if(!i&&a){await t.from("friend_requests").update({status:"accepted",updated_at:new Date().toISOString()}).eq("id",e);let[i,n]=[a.sender_id,r.id].sort();return await t.from("friendships").insert({player1_id:i,player2_id:n,friendship_level:1}),{success:!0}}}}catch(e){console.log("[v0] Supabase accept failed, using localStorage")}let a=n(),i=a.requests.find(t=>t.id===e);return i?(i.status="accepted",a.friendships.push({id:`friend-${Date.now()}`,player1_id:i.sender_id,player2_id:i.receiver_id,friendship_level:1,created_at:new Date().toISOString(),last_interaction:new Date().toISOString()}),s(a),{success:!0}):{success:!1,error:"Ğ—Ğ°Ğ¿Ğ¸Ñ‚ Ğ½Ğµ Ğ·Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾"}}async function h(e){let t=(0,r.createClient)();if(!t)return{success:!1,error:"Supabase not configured"};try{let r=await o();if(!r)return{success:!1,error:"Not authenticated"};let{error:a}=await t.from("friend_requests").update({status:"rejected",updated_at:new Date().toISOString()}).eq("id",e).eq("receiver_id",r.id);if(a)throw a;return{success:!0}}catch(e){return console.error("[v0] Error rejecting friend request:",e),{success:!1,error:e.message}}}async function g(){console.log("[v0] Getting friends list...");let e=(0,r.createClient)();if(e)try{let t=await o();if(t){console.log("[v0] Fetching friends for user:",t.id);let{data:r,error:a}=await e.from("friendships").select(`
            *,
            player1:player_profiles!friendships_player1_id_fkey(id, player_id, nickname, level, status, skin, bio, is_online, last_online),
            player2:player_profiles!friendships_player2_id_fkey(id, player_id, nickname, level, status, skin, bio, is_online, last_online)
          `).or(`player1_id.eq.${t.id},player2_id.eq.${t.id}`).order("last_interaction",{ascending:!1});if(a)console.error("[v0] Supabase friends error:",a);else if(r)return console.log("[v0] Found friends from Supabase:",r.length),r.map(e=>({...e,friend:e.player1_id===t.id?e.player2:e.player1}))}else console.log("[v0] No authenticated user")}catch(e){console.error("[v0] Error getting friends from Supabase:",e)}else console.log("[v0] Supabase not configured");console.log("[v0] Using localStorage for friends");let t=n(),s=await (0,a.loadGameState)(),l=s?.profile?.nickname||"local-user",c=t.friendships.filter(e=>e.player1_id===l||e.player2_id===l).map((e,t)=>{let r=i(1);return{...e,friend:r[0]}});return console.log("[v0] Returning mock friends:",c.length),c}async function y(e){let t=(0,r.createClient)();if(!t)return{success:!1,error:"Supabase not configured"};try{if(!await o())return{success:!1,error:"Not authenticated"};let{error:r}=await t.from("friendships").delete().eq("id",e);if(r)throw r;return{success:!0}}catch(e){return console.error("[v0] Error removing friend:",e),{success:!1,error:e.message}}}async function v(e){let t=(0,r.createClient)();if(t)try{let r=await o();if(r){let[a,i]=[r.id,e].sort(),{data:n,error:s}=await t.from("friendships").select("id").eq("player1_id",a).eq("player2_id",i).maybeSingle();if(s)return console.log("[v0] Error checking friendship:",s.message),!1;return!!n}}catch(e){return console.log("[v0] Exception checking friendship:",e),!1}let i=n(),s=await (0,a.loadGameState)(),l=s?.profile?.nickname||"local-user";return i.friendships.some(t=>t.player1_id===l&&t.player2_id===e||t.player1_id===e&&t.player2_id===l)}async function x(e){let t=(0,r.createClient)();if(t)try{let{data:r,error:a}=await t.from("player_profiles").select("id, player_id, nickname, level, status, skin, bio, faculty, group, is_online, last_online, total_play_time, achievements, cafe_high_score, library_high_score, care_packages_high_score").eq("player_id",e).single();if(!a&&r)return r}catch(e){console.log("[v0] Supabase search by ID failed")}let a=i(1);return a.length>0?{...a[0],player_id:e}:null}e.s(["acceptFriendRequest",()=>f,"areFriends",()=>v,"getActivePlayers",()=>d,"getFriends",()=>g,"getIncomingRequests",()=>m,"getOutgoingRequests",()=>p,"getRecommendedPlayers",()=>c,"rejectFriendRequest",()=>h,"removeFriend",()=>y,"searchPlayerByPlayerId",()=>x,"searchPlayers",()=>l,"sendFriendRequest",()=>u],7850)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},67894,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(92989),i=e.i(46932),n=e.i(71689),s=e.i(79002),o=e.i(82293),l=e.i(75254);let c=(0,l.default)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),d=(0,l.default)("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var u=e.i(14764),m=e.i(31278),p=e.i(83086),f=e.i(67881),h=e.i(27341),g=e.i(40364),y=e.i(7850);function v(){let e=(0,a.useRouter)(),{showSuccess:l,showAlert:v,showConfirm:x}=(0,g.useGameModal)(),[_,w]=(0,r.useState)([]),[b,k]=(0,r.useState)([]),[S,j]=(0,r.useState)(!0),[N,C]=(0,r.useState)(null);(0,r.useEffect)(()=>{M()},[]);let M=async()=>{j(!0);let[e,t]=await Promise.all([(0,y.getIncomingRequests)(),(0,y.getOutgoingRequests)()]);w(e),k(t),j(!1)},R=async(e,t)=>{C(e);let r=await (0,y.acceptFriendRequest)(e);r.success?(l(`${t} Ñ‚ĞµĞ¿ĞµÑ€ Ñ‚Ğ²Ñ–Ğ¹ Ğ´Ñ€ÑƒĞ³!`,()=>{let e=document.createElement("canvas");e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="none",e.style.zIndex="9999",document.body.appendChild(e),setTimeout(()=>{document.body.removeChild(e)},3e3)}),await M()):v(r.error||"ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ğ¿Ñ€Ğ¸Ğ¹Ğ½ÑÑ‚Ñ‚Ñ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñƒ"),C(null)},q=async(e,t)=>{x(`Ğ’Ñ–Ğ´Ñ…Ğ¸Ğ»Ğ¸Ñ‚Ğ¸ Ğ·Ğ°Ğ¿Ğ¸Ñ‚ Ğ²Ñ–Ğ´ ${t}?`,async()=>{C(e);let t=await (0,y.rejectFriendRequest)(e);t.success?(l("Ğ—Ğ°Ğ¿Ğ¸Ñ‚ Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ¾"),await M()):v(t.error||"ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ° Ğ²Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñƒ"),C(null)},"Ğ’Ñ–Ğ´Ñ…Ğ¸Ğ»ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñƒ")};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[(0,t.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[(0,t.jsx)("div",{className:"absolute top-20 left-10 w-64 h-64 bg-blue-300/30 rounded-full blur-3xl"}),(0,t.jsx)("div",{className:"absolute bottom-20 right-10 w-96 h-96 bg-purple-300/30 rounded-full blur-3xl"})]}),(0,t.jsxs)("div",{className:"relative z-10 container mx-auto px-4 py-8",children:[(0,t.jsxs)(i.motion.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[(0,t.jsxs)(f.Button,{variant:"ghost",onClick:()=>e.push("/game"),className:"mb-4 rounded-full hover:scale-105 transition-all",children:[(0,t.jsx)(n.ArrowLeft,{className:"w-4 h-4 mr-2"}),"ĞĞ°Ğ·Ğ°Ğ´ Ğ´Ğ¾ Ğ³Ñ€Ğ¸"]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center shadow-xl",children:(0,t.jsx)(s.UserPlus,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("div",{className:"absolute inset-0 rounded-2xl bg-gradient-to-br from-green-500 to-emerald-600 blur-xl opacity-50"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-extrabold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"Ğ—Ğ°Ğ¿Ğ¸Ñ‚Ğ¸ Ğ² Ğ´Ñ€ÑƒĞ·Ñ–"}),(0,t.jsx)("p",{className:"text-muted-foreground mt-1",children:"ĞšĞµÑ€ÑƒĞ¹ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ğ°Ğ¼Ğ¸ Ğ² Ğ´Ñ€ÑƒĞ·Ñ–"})]})]})]}),(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(h.Tabs,{defaultValue:"incoming",className:"space-y-6",children:[(0,t.jsxs)(h.TabsList,{className:"grid w-full max-w-md grid-cols-2 rounded-2xl bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl border border-white/30 p-1 shadow-xl",children:[(0,t.jsxs)(h.TabsTrigger,{value:"incoming",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-green-500 data-[state=active]:to-emerald-500 data-[state=active]:text-white font-bold",children:[(0,t.jsx)(d,{className:"w-4 h-4 mr-2"}),"Ğ’Ñ…Ñ–Ğ´Ğ½Ñ– (",_.length,")"]}),(0,t.jsxs)(h.TabsTrigger,{value:"outgoing",className:"rounded-xl data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-500 data-[state=active]:to-purple-500 data-[state=active]:text-white font-bold",children:[(0,t.jsx)(u.Send,{className:"w-4 h-4 mr-2"}),"Ğ’Ğ¸Ñ…Ñ–Ğ´Ğ½Ñ– (",b.length,")"]})]}),(0,t.jsx)(h.TabsContent,{value:"incoming",className:"space-y-4",children:S?(0,t.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,t.jsx)(m.Loader2,{className:"w-12 h-12 animate-spin text-primary"})}):_.length>0?(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:_.map((e,r)=>(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*r},className:"relative group",children:(0,t.jsxs)("div",{className:"relative bg-gradient-to-br from-white/80 to-white/60 dark:from-slate-800/80 dark:to-slate-900/60 backdrop-blur-xl rounded-3xl p-6 border border-white/30 shadow-xl hover:shadow-2xl transition-all",children:[(0,t.jsx)(i.motion.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-2 -right-2",children:(0,t.jsx)(p.Sparkles,{className:"w-8 h-8 text-yellow-500 animate-pulse"})}),(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-green-400 to-emerald-600 flex items-center justify-center shadow-lg",children:(0,t.jsx)(s.UserPlus,{className:"w-7 h-7 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-bold text-lg truncate",children:e.sender?.nickname}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.sender?.status," â€¢ Ğ Ñ–Ğ²ĞµĞ½ÑŒ ",e.sender?.level]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(f.Button,{size:"sm",onClick:()=>R(e.id,e.sender?.nickname||""),disabled:N===e.id,className:"flex-1 rounded-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 hover:scale-105 transition-all shadow-xl font-bold",children:N===e.id?(0,t.jsx)(m.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.UserCheck,{className:"w-4 h-4 mr-1"}),"ĞŸÑ€Ğ¸Ğ¹Ğ½ÑÑ‚Ğ¸"]})}),(0,t.jsxs)(f.Button,{size:"sm",variant:"outline",onClick:()=>q(e.id,e.sender?.nickname||""),disabled:N===e.id,className:"flex-1 rounded-full bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl border-white/30 hover:bg-red-100 dark:hover:bg-red-900/30 hover:scale-105 transition-all shadow-lg font-bold",children:[(0,t.jsx)(c,{className:"w-4 h-4 mr-1"}),"Ğ’Ñ–Ğ´Ñ…Ğ¸Ğ»Ğ¸Ñ‚Ğ¸"]})]})]})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-16 bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl rounded-3xl border border-white/30 shadow-xl",children:[(0,t.jsx)(d,{className:"w-24 h-24 text-muted-foreground mx-auto mb-4 opacity-50"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-muted-foreground mb-2",children:"ĞĞµĞ¼Ğ°Ñ” Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñ–Ğ²"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"ĞŸĞ¾ĞºĞ¸ Ñ‰Ğ¾ Ğ½Ñ–Ñ…Ñ‚Ğ¾ Ğ½Ğµ Ğ½Ğ°Ğ´Ñ–ÑĞ»Ğ°Ğ² Ñ‚Ğ¾Ğ±Ñ– Ğ·Ğ°Ğ¿Ğ¸Ñ‚ Ñƒ Ğ´Ñ€ÑƒĞ·Ñ–"})]})}),(0,t.jsx)(h.TabsContent,{value:"outgoing",className:"space-y-4",children:S?(0,t.jsx)("div",{className:"flex items-center justify-center py-16",children:(0,t.jsx)(m.Loader2,{className:"w-12 h-12 animate-spin text-primary"})}):b.length>0?(0,t.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3",children:b.map((e,r)=>(0,t.jsx)(i.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*r},className:"relative group",children:(0,t.jsx)("div",{className:"relative bg-gradient-to-br from-white/80 to-white/60 dark:from-slate-800/80 dark:to-slate-900/60 backdrop-blur-xl rounded-3xl p-6 border border-white/30 shadow-xl hover:shadow-2xl transition-all",children:(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-blue-400 to-purple-600 flex items-center justify-center shadow-lg",children:(0,t.jsx)(u.Send,{className:"w-7 h-7 text-white"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-bold text-lg truncate",children:e.receiver?.nickname}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.receiver?.status," â€¢ Ğ Ñ–Ğ²ĞµĞ½ÑŒ ",e.receiver?.level]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"ĞÑ‡Ñ–ĞºÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ñ–..."})]})]})})},e.id))}):(0,t.jsxs)("div",{className:"text-center py-16 bg-white/50 dark:bg-slate-800/50 backdrop-blur-xl rounded-3xl border border-white/30 shadow-xl",children:[(0,t.jsx)(u.Send,{className:"w-24 h-24 text-muted-foreground mx-auto mb-4 opacity-50"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-muted-foreground mb-2",children:"ĞĞµĞ¼Ğ°Ñ” Ğ²Ğ¸Ñ…Ñ–Ğ´Ğ½Ğ¸Ñ… Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñ–Ğ²"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Ğ¢Ğ¸ Ñ‰Ğµ Ğ½Ğµ Ğ½Ğ°Ğ´Ñ–ÑĞ»Ğ°Ğ² Ğ¶Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñƒ Ğ² Ğ´Ñ€ÑƒĞ·Ñ–"})]})})]})})]})]})}e.s(["default",()=>v],67894)}]);